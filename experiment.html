<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="js/paper-full.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/howler/1.1.28/howler.min.js">
    </script>
    <style> 
        * {
            margin: 0px;
            padding: 0px;
            border: 0px;
        }
        body {
            height: 100%;
            margin: 0;
        }
        #myCanvas {
            background-color: #2f2f2f;
            width: 100%;
            height: 100%;
        }
    </style>
    <script type="text/paperscript" canvas="myCanvas">

        // defining the sounds using howler js. defined using an object
        var keydatas = {
            a: {sound: new Howl({urls: ['sounds/bubbles.mp3']})},
            b: {sound: new Howl({urls: ['sounds/clay.mp3']})},
            c: {sound: new Howl({urls: ['sounds/confetti.mp3']})},
            d: {sound: new Howl({urls: ['sounds/corona.mp3']})},
            e: {sound: new Howl({urls: ['sounds/dotted-spiral.mp3']})},
            f: {sound: new Howl({urls: ['sounds/flash-1.mp3']})},
            g: {sound: new Howl({urls: ['sounds/flash-2.mp3']})},
            h: {sound: new Howl({urls: ['sounds/flash-3.mp3']})},
            i: {sound: new Howl({urls: ['sounds/glimmer.mp3']})},
            j: {sound: new Howl({urls: ['sounds/moon.mp3']})},
            k: {sound: new Howl({urls: ['sounds/pinwheel.mp3']})},
            l: {sound: new Howl({urls: ['sounds/piston-1.mp3']})},
            m: {sound: new Howl({urls: ['sounds/piston-2.mp3']})},
            n: {sound: new Howl({urls: ['sounds/piston-3.mp3']})},
            o: {sound: new Howl({urls: ['sounds/prism-1.mp3']})},
            p: {sound: new Howl({urls: ['sounds/prism-2.mp3']})},
            q: {sound: new Howl({urls: ['sounds/prism-3.mp3']})},
            r: {sound: new Howl({urls: ['sounds/splits.mp3']})},
            s: {sound: new Howl({urls: ['sounds/squiggle.mp3']})},
            t: {sound: new Howl({urls: ['sounds/strike.mp3']})},
            u: {sound: new Howl({urls: ['sounds/suspension.mp3']})},
            v: {sound: new Howl({urls: ['sounds/timer.mp3']})},
            w: {sound: new Howl({urls: ['sounds/ufo.mp3']})},
            x: {sound: new Howl({urls: ['sounds/veil.mp3']})},
            y: {sound: new Howl({urls: ['sounds/wipe.mp3']})},
            z: {sound: new Howl({urls: ['sounds/zig-zag.mp3']})},
            0: {sound: new Howl({urls: ['sounds/piston-1.mp3']})},
            1: {sound: new Howl({urls: ['sounds/piston-2.mp3']})},
            2: {sound: new Howl({urls: ['sounds/piston-3.mp3']})},
            3: {sound: new Howl({urls: ['sounds/prism-1.mp3']})},
            4: {sound: new Howl({urls: ['sounds/prism-2.mp3']})},
            5: {sound: new Howl({urls: ['sounds/prism-3.mp3']})},
            6: {sound: new Howl({urls: ['sounds/splits.mp3']})},
            7: {sound: new Howl({urls: ['sounds/strike.mp3']})},
            8: {sound: new Howl({urls: ['sounds/glimmer.mp3']})},
            9: {sound: new Howl({urls: ['sounds/moon.mp3']})}
        }

        var circles = [];
        var squares = [];
        var squares2 = [];
        var squares3 = [];

        function onKeyDown(event) {
            //plays the howl depending on the event.key or the letter pressed
            keydatas[event.key].sound.play()

            // returns the maximum view height/width as newpt(x,y) 
            var newPt = new Point(view.size.width, view.size.height);

            // returns random point not not greaterthan or equal to 0 in (x,y) syntax
            var randomPt = Point.random(); 

            // multiply both 
            var maxPt = newPt * randomPt;

            var randomClr = Color.random() // random-color variable
            var randomRad = Math.floor(Math.random() * 1000) // randomr radius

            // push the instance of the cirle object the array circles
            // 2nd parameter is radius which is also random number manually
            var newCrc = new Path.Circle(maxPt, randomRad);
            newCrc.fillColor = randomClr;

            // pushes the circle to the array for deletion after a few seconds
            circles.push(newCrc);

            var screenPt = new Point(view.size.width, view.size.height);
            var randomPt = Point.random();  
            var outputPt = screenPt * randomPt;

            var sqr = new Path.Rectangle({
                point: outputPt,
                size: (50, 50),
                strokeColor: randomClr
            });

            var sqr2 = new Path.Rectangle({
                point: outputPt,
                size: (40, 40),
                strokeColor: randomClr
            });

            var sqr3 = new Path.Rectangle({
                point: outputPt,
                size: (35, 35),
                strokeColor: randomClr
            });

            squares.push(sqr);
            squares2.push(sqr2);
            squares3.push(sqr3);
            console.log(squares);

            // BEHIND THE SCENES: removes 5 circle objects every 5 seconds
            // this is to prevent excess memorry usage of the array circle but causes some bugs
            // setInterval(function(){circles.splice(0, 5)}, 5000); // this one or below

            if (circles.length === 13) {
                circles.splice(0, 6);
            } 
            if (squares.length === 13) {
                squares.splice(0, 6);
            }
            if (squares2.length === 13) {
                squares2.splice(0, 6);
            }
            // this removes 3 elements if the length is already 13 hence, length will not be greater than 13 anymore
        }

        // animation to change the color of the circle hue changes to 1 every frame and shrink it
        // looping into array of circles to apply that animation
        function onFrame() {
            for (var i=0; i<=circles.length-1; i++) {
                circles[i].fillColor.hue += 1; // adds one to the hue every frame
                circles[i].scale(0.8); // scales it up to .01% every frame. changes to 0.9 to shrink it
            }

            for(var i=0; i<=squares.length-1; i++) {
                squares[i].scale(1.1)
            }

            for(var i=0; i<=squares2.length-1; i++) {
                squares2[i].scale(1.1)
            }

            for(var i=0; i<=squares3.length-1; i++) {
                squares3[i].scale(1.2)
            }
        }

    </script>
    <title>Experiment</title>
</head>
<body>
    <canvas id="myCanvas"></canvas>
</body>
</html>